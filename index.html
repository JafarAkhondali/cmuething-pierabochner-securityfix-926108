<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Piera Bochner</title>
        <link href="css/style.css" rel="stylesheet" type="text/css">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="js/jquery.mousewheel.js"></script>
        <script type="text/javascript">
        //wait until everything is loaded, including jquery
            $( document ).ready(function() {
                console.log( "ready!" );
        //open and close the hamburger menu
            $("#menu-toggle").click(function(e) {
                e.preventDefault();
                $("#sidenav-toggle").toggleClass("toggled");
                    var icon = $(this).parent().find(".container")
                    var s = $("body");
                    if (icon.hasClass('open')) {
                        icon.removeClass('open').addClass('change');
                        s.addClass('lock');
                    }
                    else {
                        icon.removeClass('change').addClass('open');
                        s.removeClass('lock');
                    }
                });
            });
        </script>

        <script type="text/javascript">
        //return to beginning of the carousel on load
            window.onload = function() {
             setTimeout (function () {
              scrollTo(0,0);
              if ($("#intro-video").hasClass('fixed-video')) {
                        $("#intro-video").removeClass("fixed-video");
                }
             }, 100);
            }
        </script>

        <script type="text/javascript">
        //temporary fix, now the user cannot scroll back to the video because there is no else
            $( document ).ready(function() {
                console.log( "ready!" );

            window.onscroll = function() {myFunction()};

            var header = document.getElementById("header");
            var sticky = header.offsetTop;

            function myFunction() {

              if (window.pageYOffset > sticky) {
                    $('nav').addClass('fixed-header');
                }
            }
            });
        </script>

         <script type="text/javascript">
        //if I can use this to run the function for all no-gradient, then I won't need the css and it will work http://jsfiddle.net/pmGRq/3/; SUCCESS (10/21/19)
                var randomColourOne;
                var randomColourTwo;
                var randomColourThree;
                var randomColourFour;
                var randomColourFive;
                var randomColourSix;
                var randomColourSeven;
                var randomColourEight;
                var randomColourNine;

                function firstColour(){
                    // if (window.pageYOffset > sticky) {
                    randomColourOne = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    randomColourTwo = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                
                    randomColourThree = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});

                    randomColourFour = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    randomColourFive = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                
                    randomColourSix = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});

                    randomColourSeven = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    randomColourEight = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                
                    randomColourNine = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    var background = document.querySelectorAll('#background1, #background2, #background3, #background4, #background5, #background6, #background7');

                    for (var i = 0; i < background.length; i++)
                    {

                    background[i].style.backgroundImage = "-webkit-linear-gradient("+ randomColourOne +" , "+ randomColourTwo +" ,  "+ randomColourThree +" , "+ randomColourFour +" , "+ randomColourFive +" , "+ randomColourSix +" , "+ randomColourSeven +" , "+ randomColourEight +" , "+ randomColourNine +")";
                    
                    // localStorage.setItem("copyColor", "-webkit-linear-gradient("+ randomColourOne +" , "+ randomColourTwo +" ,  "+ randomColourThree +" , "+ randomColourFour +" , "+ randomColourFive +" , "+ randomColourSix +" , "+ randomColourSeven +" , "+ randomColourEight +" , "+ randomColourNine +")");

                    }

            }
            
        </script>

        <script type="text/javascript">
        //scroll horizontally on vertical scrolling, but only when on desktop size screens
        $(document).ready(function(){   

            function responsiveTest() {

            if (x.matches) {
                    //using the scrollEventHandler to restrict the horizontal scrolling on load, when the page is loaded; used CSS method instead
                    //using bind/unbind to try to re-enable default scrolling; that's still not working

                    var horizontalTest = new Boolean(false);

                    var $body = $(document);

                    Site = {}

                $(window).scroll(function() { 

                    var scroll = $(window).scrollTop();  

                    var s = $(".slider");
                    var pos = s.position();

                    var leftEdge = document.getElementById("trigger1");
                    var redirect_1 = leftEdge.offsetLeft;

                    var rightEdge = document.getElementById("trigger2");
                    var redirect_2 = rightEdge.offsetRight;

                    var oldScrollTop = $(window).scrollTop();
                    var oldScrollLeft = $(window).scrollLeft();

                    function noop() {};

//remove from here

                    Site.body = $('body');
                    Site.window_height = $(window).height();
                    Site.window_width = $(window).width();
                    Site.document_height = $(document).height() - Site.window_height;
                    // var font_size = parseInt($('html').css('font-size'));
                    Site.image_width = 0;
                    Site.attribution = $('attribution');

//to here

                    if (scroll >= 10) {
                        $(".slider").addClass("scrolled");
                        $(".caret").addClass("scrolledDown");
                    }

                    if (scroll >= pos.top && scroll >= $(window).height()) {
                        $("body").addClass("at-the-bottom");
                        $('#intro-video').addClass('fixed-video');

                        // function foo() {
                        //     window.scrollTo(0,0);
                        //     foo = noop;
                        // };

                         // $("html, body").mousewheel(function(event, delta) {

                         //    this.scrollLeft -= (delta * .15);

                         //    event.preventDefault();

                         //    });

                    }

//remove from here

                    if (Site.body.hasClass("at-the-bottom")) {
                        // $(document).imagesLoaded(function(){
                          $('.slide').each(function(){
                            Site.image_width = Site.image_width + $(this).outerWidth() + (110);
                          });
                        // })

                        if (Site.window_width > 1050){
                          Site.image_width = Site.image_width - Site.window_width;
                        } else{
                          Site.image_width = Site.image_width - Site.window_width;
                        }

                        $(window).on('scroll', Site.scrollProject);
                    }

                      Site.scrollProject = function(){
                            var scroll = $(document).scrollTop();
                            Site.scroll_position = scroll/Site.document_height * Site.image_width;
                            console.log(Site.image_width);
                            $('#full-carousel').css('transform', 'translateX(-' + Site.scroll_position + 'px)')
                    }  

//to here

                    if (window.pageXOffset >= redirect_1) {
                            console.log("hello2");
                    }

                    else {
                        $("body").removeClass('at-the-left-edge');
                        $('#intro-video').addClass('fixed-video'); 

                        }
                       
                    });

                }

                else {
                //trying to turn on gradient when the candle is in the view
                //maybe add to the else statement of the responsiveness test

                    $( document ).ready(function() {

                    function noop() {};
                    function yoop() {
                        //something that allows the color to load
                    };

                    var debounce;
                    var loadGradient = false;
                    
                    (function($) {

                    $.fn.visible = function(partial) {
            
                          var $t            = $(this),
                              $w            = $(window),
                              viewTop       = $w.scrollTop(),
                              viewBottom    = viewTop + $w.height(),
                              _top          = $t.offset().top,
                              _bottom       = _top + $t.height(),
                              compareTop    = partial === true ? _bottom : _top,
                              compareBottom = partial === true ? _top : _bottom;
                        
                        return ((compareBottom <= viewBottom) && (compareTop >= viewTop));

                      };
                        
                    })(jQuery);

                    $(window).scroll(function(event) {

                    var scroll = $(window).scrollTop();

                      $(".no-gradient").each(function(i, el) {
                        var el = $(el);
                        if (el.visible(true)) { 
                          el.addClass("gradient-test");
                        } else {
                          el.removeClass("gradient-test");
                        }
                      });
                      if (debounce) clearTimeout(debounce);
                          debounce = setTimeout(function(){
                            debounce = null;
                            firstColour();
                            }, 1000);

                        if (scroll >= 10) {
                        $(".caret").addClass("scrolledDown");
                    }
                        if ($(".caret").hasClass('scrolledDown') && scroll == 0) {
                        $(".caret").removeClass("scrolledDown");
                        }
                    });

                });

            }

            }

            var x = window.matchMedia("(min-width: 700px)")
            responsiveTest(x) // Call listener function at run time
            x.addListener(responsiveTest) // Attach listener function on state changes

            }); 

        </script>

	</head>

	<body onresize="responsiveTest()" class="black at-the-left-edge">

		<nav class="result" id="header">
			<div class="logo">
				<a href="https://www.pierabochner.com">
					<img src="img/piera-01.svg">
				</a>
			</div>
            <div class="container open" id="menu-toggle" >
                <div class="bar1"></div>
                <div class="bar2"></div>
                <div class="bar3"></div>
            </div>
		</nav>

        <div class="caret">
            <p><i class="arrow down"></i></p>
        </div>

        <div class="sidenav" id="sidenav-toggle" >
            <div class="table">
                <a href="https://pierabochner.bigcartel.com/stockists">Stockists</a>
                <a href="https://pierabochner.bigcartel.com/about">About</a>
                <a href="https://pierabochner.bigcartel.com/contact">Contact</a>
                <a href="https://www.instagram.com/piboch/?hl=en" target"_blank">Instagram</a>
            </div>
        </div>

        <div class="intro" id="intro-video">
            <div id="video-frame">
                <iframe id="video" src="https://player.vimeo.com/video/290171567?api=1&background=1&autoplay=1&loop=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                </iframe>
            </div>
        </div>

        <div onmouseover="firstColour()" class="slider">
            <div  id="full-carousel">
                <div class="gap" id="trigger1">
                </div>

                    <div class="slide">
                        <a href="https://pierabochner.bigcartel.com/category/romanesco">
                            <p>Romanesco</p>
                            <div class="no-gradient the-wait" id="background1" id="id1"></div>
                            <iframe id="video-1" src="https://player.vimeo.com/video/353941600?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                            </iframe>
                        </a>
                    </div>

                    <div class="slide">
                        <a href="https://pierabochner.bigcartel.com/category/sugar-apple">
                            <p>Sugar Apple</p>
                            <div class="no-gradient" id="background2"></div>
                            <iframe id="video-1" src="https://player.vimeo.com/video/353941619?autoplay=1&loop=1&autopause=0&background=1" frameborder="0"  webkitallowfullscreen mozallowfullscreen allowfullscreen>
                            </iframe>
                        </a>
                    </div>
                        
                    <div class="slide">
                        <a href="https://pierabochner.bigcartel.com/category/kiwano">
                            <p>Kiwano</p>
                            <div class="no-gradient" id="background3"></div>
                            <iframe id="video-1" src="https://player.vimeo.com/video/353941609?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                            </iframe>
                        </a>
                    </div>
                    
                        
                    <div class="slide">
                        <a href="https://pierabochner.bigcartel.com/category/bumpy-gourd">
                            <p>Bumpy Gourd</p>
                            <div class="no-gradient" id="background4"></div>
                            <iframe id="video-1" src="https://player.vimeo.com/video/353941592?autoplay=1&loop=1&autopause=0&background=1" width="640" height="1278" frameborder="0" allow="autoplay; fullscreen" allowfullscreen>
                            </iframe>
                        </a>
                    </div>
                    
                    <div class="slide">
                        <a href="https://pierabochner.bigcartel.com/category/bitter-melon">
                            <p>Bitter Melon</p>
                            <div class="no-gradient" id="background5"></div>
                            <iframe id="video-1" src="https://player.vimeo.com/video/353942237?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                            </iframe>
                        </a>
                    </div>

                    <div class="slide">
                        <a href="https://pierabochner.bigcartel.com/category/assorted-minis">
                            <p>Assorted Minis</p>
                            <div class="no-gradient" id="background6"></div>
                            <iframe id="video-1" src="https://player.vimeo.com/video/353942237?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                            </iframe>
                        </a>
                    </div>

                    <div class="slide">
                        <a href="https://pierabochner.bigcartel.com/category/starfruit">
                            <p>Starfruit</p>
                            <div class="no-gradient" id="background7"></div>
                            <iframe id="video-1" src="https://player.vimeo.com/video/353942237?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                            </iframe>
                        </a>
                    </div>

                    <div class="gap" id="trigger2">
                    </div>

                    <div class="attribution">
                        <p>site designed & developed by connor muething</p>
                    </div>
                </div>    
            </div>
    </body>	
</html>