<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Candle Grid Test</title>
        <link href="css/style.css" rel="stylesheet" type="text/css">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="js/jquery.mousewheel.js"></script>
        <script type="text/javascript">
        //wait until everything is loaded, including jquery
            $( document ).ready(function() {
                console.log( "ready!" );
        //open and close the hamburger menu
            $("#menu-toggle").click(function(e) {
                e.preventDefault();
                $("#sidenav-toggle").toggleClass("toggled");
                    var icon = $(this).parent().find(".container")
                    if (icon.hasClass('open'))
                        icon.removeClass('open').addClass('change');
                    else
                        icon.removeClass('change').addClass('open');
            });
            });
        </script>

        <script type="text/javascript">
        //scroll horizontally on vertical scrolling
            // $(function() {

            // $("html, body").mousewheel(function(event, delta) {

            // this.scrollLeft -= (delta * .5);
    
            // event.preventDefault();

            //    });

            // });
        </script>
        
        <script type="text/javascript">
        //return to beginning of the carousel on load
            window.onload = function() {
             setTimeout (function () {
              scrollTo(0,0);
             }, 100);
            }
        </script>

        <script type="text/javascript">
        //temporary fix, now the user cannot scroll back to the video because there is no else
        //sticky has 50 added to it to prevent the video from flashing away, but now the header doesn't really stick...ADD DELAY?
        //trying to add a trigger so that when you get back to the beginning, you can scroll back up to the video
            $( document ).ready(function() {
                console.log( "ready!" );

            window.onscroll = function() {myFunction()};

            var header = document.getElementById("header");
            var sticky = header.offsetTop;

            function myFunction() {

              if (window.pageYOffset > sticky) {
                    $('nav').addClass('fixed-header');
                }

              // else {
              //       $('#intro-video').removeClass('fixed-video');

                    
              // }
            }
            
                // if (window.pageXOffset <= redirect) {
                //         $('#intro-video').removeClass('fixed-video');
                //     }

                // else {
                //     $('#intro-video').addClass('fixed-video');
                // }
            });
        </script>

        <script type="text/javascript">
            $(window).scroll(function() {    
                var scroll = $(window).scrollTop();
                var s = $(".slider");
                var pos = s.position();

                var leftEdge = document.getElementById("trigger1")
                var redirect_1 = leftEdge.offsetLeft;

                var rightEdge = document.getElementById("trigger2")
                var redirect_2 = rightEdge.offsetRight;

                var scrollEventHandler = function() {
                  window.scroll(0, window.pageYOffset)
                }

                window.addEventListener("scroll", scrollEventHandler, true);


                if (scroll >= 10) {
                    $(".slider").addClass("scrolled");
                }

                if (scroll >= pos.top & scroll >= $(window).height()) {
                    s.addClass("at-the-bottom");
                    window.addEventListener("scroll", scrollEventHandler, false);
                }

                if (window.pageXOffset == redirect_1) {
                    $(".slider").addClass('at-the-left-edge');
                }

                else {
                    $(".slider").removeClass('at-the-left-edge');
                    // $('#intro-video').addClass('fixed-video'); 
                    // function scrollHorizontally() {
                        $("html, body").mousewheel(function(event, delta) {

                        this.scrollLeft -= (delta * .5);

                        event.preventDefault();

                        });
                    // }
                }

                //try to make it conditional, that as soon as it has all three, you can scroll vertically. still need to figure out how to return to the default scrolling

                // if ($(".slider").hasClass('at-the-left-edge') || $(".slider").hasClass('at-the-bottom')) {
                //     $('#intro-video').removeClass('fixed-video'); 
                //     window.addEventListener("mousewheel", scrollHorizontally, false);
                // }

                // else {
                //     $('#intro-video').addClass('fixed-video'); 
                // }

            });
        </script>


        <script type="text/javascript">
        //test to fix the carousel when you get all the way to the right
            // $( document ).ready(function() {
            //     console.log( "ready!" );

            // window.onscroll = function() {myFunction2()};

            // var carousel = document.getElementById("full-carousel");
            // var sticky = carousel.offsetRight;

            // function myFunction2() {
            //   if (window.pageXOffset > sticky) {
            //         $('.slider').addClass('fixed');
            //     }
            //     else {
            //         $('.slider').removeClass('fixed');
            //     }
            // }
            // });
        </script>

        <script type="text/javascript">
        //initial test to add sticky header nav
        //     $(window).scroll(function(){
        //         if ($(window).scrollTop() >= 600) {
        //             $('nav').addClass('fixed-header');
        //         }
        //         else {
        //             $('nav').removeClass('fixed-header');
        //         }
        //     });
        // </script>

        <script type="text/javascript">
        //if I can use this to run the function for all no-gradient, then I won't need the css and it will work http://jsfiddle.net/pmGRq/3/
                var randomColourOne;
                var randomColourTwo;
                var randomColourThree;
                var randomColourFour;
                var randomColourFive;
                var randomColourSix;
                var randomColourSeven;
                var randomColourEight;
                var randomColourNine;

                function firstColour(){
                    // if (window.pageYOffset > sticky) {
                    randomColourOne = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    randomColourTwo = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                
                    randomColourThree = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});

                    randomColourFour = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    randomColourFive = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                
                    randomColourSix = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});

                    randomColourSeven = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    randomColourEight = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                
                    randomColourNine = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                    
                    var background = document.querySelectorAll('#background1, #background2, #background3, #background4, #background5');

                    for (var i = 0; i < background.length; i++)
                    {

                    background[i].style.backgroundImage = "-webkit-linear-gradient("+ randomColourOne +" , "+ randomColourTwo +" ,  "+ randomColourThree +" , "+ randomColourFour +" , "+ randomColourFive +" , "+ randomColourSix +" , "+ randomColourSeven +" , "+ randomColourEight +" , "+ randomColourNine +")";
                    
                    localStorage.setItem("copyColor", "-webkit-linear-gradient("+ randomColourOne +" , "+ randomColourTwo +" ,  "+ randomColourThree +" , "+ randomColourFour +" , "+ randomColourFive +" , "+ randomColourSix +" , "+ randomColourSeven +" , "+ randomColourEight +" , "+ randomColourNine +")");

                    }

            }
            
        </script>

	</head>

	<body class="black">
        
		<nav class="result" id="header">
			<div class="logo">
				<a href="https://www.instagram.com/piboch/?hl=en" target="_blank">
					<img src="img/piera-01.svg">
				</a>
			</div>
            <div class="container open" id="menu-toggle" >
                <div class="bar1"></div>
                <div class="bar2"></div>
                <div class="bar3"></div>
            </div>
		</nav>

        <div class="sidenav" id="sidenav-toggle" >
            <div class="table">
                <a href="#">Shop</a>
                <a href="#">Archive</a>
                <a href="#">About</a>
                <a href="#">Contact</a>
            </div>
        </div>

        <div class="intro intro-lock" id="intro-video">
            <div id="video-frame">
                <iframe id="video" src="https://player.vimeo.com/video/290171567?api=1&background=1&autoplay=1&loop=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                </iframe>
            </div>
        </div>

        <div onmouseover="firstColour()" class="slider" id="full-carousel">

            <div class="gap" id="trigger1">
            </div>

                <div class="slide select">
                    <a href="file:///Users/connormuething/Desktop/PIERA/pierabochner/grid_test_2.html" target="_blank">
                        <p>Candle Title #3</p>
                        <div class="no-gradient" id="background1"></div>
                        <iframe id="video-1" src="https://player.vimeo.com/video/353941600?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                        </iframe>
                    </a>
                </div>

                <div class="slide">
                    <a href="https://www.pierabochner.com/product/16" target="_blank">
                        <p>Candle Title #2</p>
                        <div class="no-gradient" id="background2"></div>
                        <iframe id="video-2" src="https://player.vimeo.com/video/353941619?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" allow="autoplay; fullscreen" allowfullscreen>
                        </iframe>
                    </a>
                </div>
                    
                <div class="slide">
                    <a href="file:///Users/connormuething/Desktop/PIERA/pierabochner/grid_test_2.html" target="_blank">
                        <p>Candle Title #1</p>
                        <div class="no-gradient" id="background3"></div>
                        <iframe id="video-1" src="https://player.vimeo.com/video/353941609?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                        </iframe>
                    </a>
                </div>
                
                    
                <div class="slide">
                    <a href="https://www.pierabochner.com/product/16" target="_blank">
                        <p>Candle Title #4</p>
                        <div class="no-gradient" id="background4"></div>
                        <iframe id="video-2" src="https://player.vimeo.com/video/353941592?autoplay=1&loop=1&autopause=0&background=1" width="640" height="1278" frameborder="0" allow="autoplay; fullscreen" allowfullscreen>
                        </iframe>
                    </a>
                </div>
                
                <div class="slide">
                    <a href="file:///Users/connormuething/Desktop/PIERA/pierabochner/grid_test_2.html" target="_blank">
                        <p>Candle Title #5</p>
                        <div class="no-gradient" id="background5"></div>
                        <iframe id="video-1" src="https://player.vimeo.com/video/353942237?autoplay=1&loop=1&autopause=0&background=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
                        </iframe>
                    </a>
                </div>

                <div class="gap" id="trigger2">
                </div>
                
        </div>
	</body>	
    </html>